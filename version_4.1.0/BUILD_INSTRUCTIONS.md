# Инструкция по сборке исполняемого файла (.exe)

## Подготовка

### 1. Установите PyInstaller

```bash
py -m pip install pyinstaller
```

Или добавьте в `requirements.txt` и установите все зависимости:

```bash
py -m pip install -r requirements.txt
```

### 2. Убедитесь, что все зависимости установлены

```bash
py -m pip install -r requirements.txt
```

## Сборка исполняемого файла

### Вариант 1: Использование скрипта (рекомендуется)

```bash
py build_exe.py
```

### Вариант 2: Использование spec файла

```bash
pyinstaller build_exe.spec
```

### Вариант 3: Прямая команда PyInstaller

```bash
pyinstaller --name ML_Training_Kotel --onefile --windowed --clean run.py
```

## Результат

После успешной сборки:

- **Исполняемый файл:** `dist/ML_Training_Kotel.exe`
- **Размер:** примерно 50-100 МБ (зависит от включенных библиотек)
- **Время сборки:** 2-5 минут

## Распространение

### Для использования на другом компьютере:

1. **Скопируйте файл:**
   - `dist/ML_Training_Kotel.exe` на целевой компьютер

2. **Создайте структуру папок** (опционально, создастся автоматически):
   ```
   ML_Training_Kotel.exe
   data/          (создастся автоматически при первом запуске)
   ```

3. **Запустите:**
   - Двойной клик на `ML_Training_Kotel.exe`
   - Или из командной строки: `ML_Training_Kotel.exe`

## Уменьшение размера exe файла

Если размер файла слишком большой, можно:

1. **Исключить ненужные модули** в `build_exe.spec`:
   ```python
   excludes=[
       'matplotlib.tests',
       'numpy.tests',
       'pandas.tests',
       # и т.д.
   ]
   ```

2. **Использовать UPX** (уже включено в spec файл):
   - Сжимает исполняемый файл
   - Может замедлить запуск

3. **Собрать без одного файла** (папка с файлами):
   - Измените `--onefile` на `--onedir` в команде
   - Будет создана папка `dist/ML_Training_Kotel/` с множеством файлов
   - Размер будет больше, но запуск быстрее

## Решение проблем

### Проблема: "ModuleNotFoundError"

**Решение:** Добавьте модуль в `hiddenimports` в `build_exe.spec`:
```python
hiddenimports=[
    'ваш_модуль',
    # ...
]
```

### Проблема: Большой размер файла

**Решение:** 
- Используйте виртуальное окружение с минимальными зависимостями
- Исключите тестовые модули
- Используйте `--onedir` вместо `--onefile`

### Проблема: Антивирус блокирует exe

**Решение:**
- Это нормально для PyInstaller (ложное срабатывание)
- Добавьте исключение в антивирус
- Или подпишите exe цифровой подписью (платно)

### Проблема: Ошибка при запуске exe

**Решение:**
1. Запустите из командной строки, чтобы увидеть ошибку:
   ```bash
   ML_Training_Kotel.exe
   ```
2. Проверьте логи в файле `app.log` (если создается)
3. Убедитесь, что все зависимости включены в `hiddenimports`

## Альтернативные инструменты

Если PyInstaller не работает, можно попробовать:

1. **cx_Freeze:**
   ```bash
   py -m pip install cx_Freeze
   ```

2. **Nuitka:**
   ```bash
   py -m pip install nuitka
   py -m nuitka --onefile --windows-disable-console run.py
   ```

## Автоматическая сборка

Можно создать батник для быстрой сборки:

**build.bat:**
```batch
@echo off
echo Установка зависимостей...
py -m pip install -r requirements.txt
echo.
echo Сборка exe файла...
py build_exe.py
echo.
echo Готово! Файл находится в dist/ML_Training_Kotel.exe
pause
```

