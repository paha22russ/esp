# Версия 3.0.5 - Котел ESP32

## Изменения в версии 3.0.5:

### Исправления:
- ✅ Исправлена логика датчика обратки - теперь принимает значения при изменении < 10°C
- ✅ Увеличена карточка подачи и уставки в 3 раза
- ✅ Кнопки уставки перемещены по бокам от цифр и уменьшены до нормального размера

### Улучшения:
- ⬆️ Порог определения тренда температуры: 0.01°C (было 0.1°C)
- ⬆️ Интервал обновления температур: 3 секунды (10 значений за 30 секунд)
- ⬆️ Стрелочки роста и падения температуры в веб-интерфейсе

## Текущая логика управления:

### Состояния системы:
- `IDLE` - система в покое, температура в норме
- `HEATING` - идет нагрев, вентилятор включен
- `OVERHEAT` - перегрев, вентилятор выключен

### Автоматическое управление:

**Вентилятор:**
- Включается: `supplyTemp < (setpoint - hysteresis)`
- Выключается: `supplyTemp >= (setpoint + hysteresis)`
- Защита от перегрева: выключается при `supplyTemp >= 77°C`

**Насос:**
- Включается: вентилятор работает ИЛИ `supplyTemp > minTemp`
- Работает для циркуляции даже без вентилятора

**Подброс угля:**
- Выключает вентилятор на 10 минут
- Насос продолжает работать

## Параметры (есть, но не все используются):

- `setpoint` (60°C) - уставка температуры ✅ используется
- `minTemp` (45°C) - минимальная температура ✅ используется
- `maxTemp` (75°C) - максимальная температура ❌ не используется
- `hysteresis` (2°C) - гистерезис ✅ используется
- `inertiaTemp` (55°C) - температура инерции ❌ не используется
- `inertiaTime` (10 мин) - время инерции ❌ не используется
- `overheatTemp` (77°C) - температура перегрева ✅ используется
- `heatingTimeout` (30 мин) - таймаут разогрева ❌ не используется

## Что отсутствует:

1. ❌ Обнаружение прогорания угля
2. ❌ Защита от разгона без наддува
3. ❌ Защита от закипания
4. ❌ Предупреждение о низкой температуре обратки
5. ❌ Использование параметров инерции и таймаута разогрева

## См. ANALYSIS.md для детального анализа и рекомендаций
